<div
    class="bt-form-tiptap"
    :data-has-value="vm.value ? '' : null"
    :data-has-placeholder="vm.placeholder ? '' : null"
    :data-has-help="hasSlot('help') ? '' : null"
    :data-has-focus="vm.focused ? '' : null"
    :data-is-disabled="vm.disabled ? '' : null"
    :data-has-error="vm.invalid && vm.validated ? '' : null"
    :data-has-floating-label="vm.floatingLabel ? '' : null"
>
    <div class="control-wrapper">
        <label :for="vm.fullId" v-if="hasSlot('default')"><span><slot></slot></span></label>
        <label :for="vm.fullId" v-else-if="vm.label"><span>{{ vm.label }}</span></label>

        <div ref="inputWrapper" class="input-wrapper" data-control>
            <div class="menu" v-if="editor">
                <bt-button @click="toggleBold()" :data-active="editor.isActive('bold') ? '' : null">G</bt-button>
                <bt-button @click="toggleItalic()" :data-active="editor.isActive('italic') ? '' : null">I</bt-button>
                <bt-button @click="toggleUnderline()" :data-active="editor.isActive('underline') ? '' : null">U</bt-button>
            </div>
            <editor-content
                :editor="editor"
                :disabled="vm.disabled || null"
                class="editor-content"
                @focus="onFocus()"
                @blur="onBlur()"
            />
            <slot name="errors">
                <bt-form-error v-if="vm.invalid && vm.validated" :errors="vm.errors" :target="inputWrapper" :placement="errorPlacement">
                    <slot name="error" :errors="vm.errors" :errors-map="vm.errorsMap"></slot>
                </bt-form-error>
            </slot>
        </div>
    </div>
    <div v-if="hasSlot('help')" class="help">
        <slot name="help"></slot>
    </div>
</div>
