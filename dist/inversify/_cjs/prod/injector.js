/*!
 * Banquette Inversify v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@banquette/utils-type/_cjs/prod/ensure-array"),t=require("@banquette/utils-type/_cjs/prod/is-object"),r=require("@banquette/utils-type/_cjs/prod/is-undefined"),n=require("inversify"),i=function(){function InversifyAdapter(e){r.isUndefined(e)&&(this.container=new n.Container)}return InversifyAdapter.prototype.getContainer=function(){return this.container},InversifyAdapter.prototype.get=function(e){return this.container.get(e)},InversifyAdapter.prototype.getMultiple=function(r){for(var n=[],i=[],o=0,a=e.ensureArray(r);o<a.length;o++)for(var c=a[o],s=0,p=this.container.getAll(c);s<p.length;s++){var u=p[s],l=t.isObject(u)?Object.getPrototypeOf(u):null;(!l||i.indexOf(l.constructor)<0)&&(n.push(u),i.push(l.constructor))}return n},InversifyAdapter.prototype.has=function(e){return this.container.isBound(e)},InversifyAdapter.prototype.register=function(e){for(var t=0,r=[e.identifier].concat(e.tags);t<r.length;t++){var i=r[t],o=this.container.bind(i).to(e.ctor);e.singleton?o.inSingletonScope():o.inTransientScope()}for(var a=0;a<e.constructorDependencies.length;++a){var c=e.constructorDependencies[a];null!==c.eager?n.inject(c.eager)(e.ctor,void 0,a):null!==c.lazy?n.inject(new n.LazyServiceIdentifer(c.lazy))(e.ctor,void 0,a):null!==c.tags&&n.multiInject(c.tags[0])(e.ctor,void 0,a)}for(var s=0,p=Object.keys(e.propertiesDependencies);s<p.length;s++){var u=p[s],l=e.propertiesDependencies[u].type;(null!==l.eager?n.inject(l.eager):n.inject(new n.LazyServiceIdentifer(l.lazy)))(e.ctor,u,e.propertiesDependencies[u].parameterIndex)}this.applyInjectable(e)},InversifyAdapter.prototype.applyInjectable=function(e){var t=e.ctor,r=Object.getPrototypeOf(Object);do{Reflect.hasOwnMetadata("inversify:paramtypes",t)||n.injectable()(t)}while((t=Object.getPrototypeOf(t))!==r)},InversifyAdapter}();exports.InversifyAdapter=i;
