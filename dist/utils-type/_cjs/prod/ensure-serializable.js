/*!
 * Banquette UtilsType v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./is-array.js"),r=require("./is-function.js"),i=require("./is-object.js"),s=require("./is-pojo.js"),n=require("./is-promise-like.js"),u=require("./is-scalar.js"),t=require("./is-string.js"),o=require("./is-symbol.js"),a=require("./is-undefined.js"),l=require("./utils.js");function doEnsureSerializable(f,c,b,j,d){if(a.isUndefined(f))return"[undefined]";if(null===f)return"[null]";if(r.isFunction(f))return"[function ".concat(f.name,"]");if(t.isString(f))return f.substring(0,512);if(o.isSymbol(f))return l.getSymbolDescription(f);if(n.isPromiseLike(f))return"[promise]";if(e.isArray(f)){var v=[];if(c<=0||j<c){for(var p=0,g=0,q=f;g<q.length;g++){var S=q[g];if(v.push(doEnsureSerializable(S,c,b,j+1,d)),++p>=50)break}return v}return"[array of "+f.length+" element"+(f.length>1?"s":"")+"]"}if(i.isObject(f)&&(!b||s.isPojo(f,!1))){for(var h=0,m=d;h<m.length;h++){if(m[h]===f)return"[recursive object reference]"}v={};var y=[];for(var z in f)y.push(z);var k=y.length;if(!(c<=0||j<c))return"[object of "+k+" key"+(k>1?"s":"")+"]";y.sort(),d.push(f);for(var E=0;E<y.length;++E){z=y[E];if(r.isFunction(f[z])||(v[z]=doEnsureSerializable(f[z],c,b,j+1,d)),E>=30)break}return d.pop(),v}return u.isScalar(f)?f:f+""}exports.ensureSerializable=function ensureSerializable(e,r,i){return void 0===r&&(r=5),void 0===i&&(i=!0),doEnsureSerializable(e,r,i,0,[])};
