/*!
 * Banquette ModelValidation v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_virtual/_tslib.js"),t=require("@banquette/dependency-injection/_cjs/prod/decorator/inject.decorator"),a=require("@banquette/dependency-injection/_cjs/prod/decorator/service.decorator"),i=require("@banquette/exception/_cjs/prod/usage.exception"),r=require("@banquette/model/_cjs/prod/model-metadata.service"),o=require("@banquette/utils-type/_cjs/prod/is-null-or-undefined"),l=require("@banquette/utils-type/_cjs/prod/is-undefined"),n=require("@banquette/validation/_cjs/prod/type/container"),d=function(){function ModelValidationMetadataService(e){this.aliasResolver=e,this.validatorsMap=new WeakMap}return ModelValidationMetadataService.prototype.register=function(e,t,a){var r=this.aliasResolver.resolveAlias(e),n=this.validatorsMap.get(r);if(o.isNullOrUndefined(n)&&(n={}),!l.isUndefined(n[t]))throw new i.UsageException('Another validator is already registered for "'.concat(r.name,"::").concat(t,'".\n                Please call "replace()" instead if you want to override it.'));n[t]=a,this.validatorsMap.set(r,n)},ModelValidationMetadataService.prototype.replace=function(e,t,a){var i=this.aliasResolver.resolveAlias(e);this.remove(i,t),this.register(i,t,a)},ModelValidationMetadataService.prototype.remove=function(e,t){var a=this.aliasResolver.resolveAlias(e),i=this.validatorsMap.get(a);o.isNullOrUndefined(i)||(delete i[t],this.validatorsMap.set(a,i))},ModelValidationMetadataService.prototype.get=function(e,t){var a=this.aliasResolver.resolveAlias(e),i=this.validatorsMap.get(a);if(!o.isNullOrUndefined(i)&&!l.isUndefined(i[t]))return i[t];var r=Object.getPrototypeOf(a);return r?this.get(r,t):null},ModelValidationMetadataService.prototype.has=function(e,t){var a=this.aliasResolver.resolveAlias(e);return null!==this.get(a,t)},ModelValidationMetadataService.prototype.clear=function(){this.validatorsMap=new WeakMap},ModelValidationMetadataService.prototype.getValidator=function(e){var t=this.aliasResolver.resolveAlias(e),a=this.validatorsMap.get(t);return o.isNullOrUndefined(a)?null:n.Container(a)},ModelValidationMetadataService=e.__decorate([a.Service(),e.__param(0,t.Inject(r.ModelMetadataService)),e.__metadata("design:paramtypes",[r.ModelMetadataService])],ModelValidationMetadataService)}();exports.ModelValidationMetadataService=d;
