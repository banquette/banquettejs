/*!
 * Banquette Ui v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@banquette/event/_cjs/prod/event-dispatcher"),n=require("@banquette/utils-type/_cjs/prod/is-string"),t=require("@banquette/utils-type/_cjs/prod/is-undefined"),i=require("./constant.js"),r=function(){function OrderingModule(){this.remote="auto",this.changed=!0,this._columnName=null,this._direction=null,this.eventDispatcher=new e.EventDispatcher}return Object.defineProperty(OrderingModule.prototype,"columnName",{get:function(){return this._columnName},set:function(e){this._columnName!==e&&(this._columnName=e,this.notifyChange())},enumerable:!1,configurable:!0}),Object.defineProperty(OrderingModule.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction!==e&&(this._direction=e,this.notifyChange())},enumerable:!1,configurable:!0}),Object.defineProperty(OrderingModule.prototype,"isApplicable",{get:function(){return null!==this._columnName&&null!==this._direction},enumerable:!1,configurable:!0}),OrderingModule.prototype.apply=function(e){var t=this;return null!==this._columnName&&null!==this._direction&&e.length?(e.sort((function(e,r){var o=e.item[t._columnName],u=r.item[t._columnName];if(t._direction===i.OrderingDirection.Descending){var d=o;o=u,u=d}return n.isString(o)||n.isString(u)?String(o).localeCompare(String(u),"en",{ignorePunctuation:!0}):o-u?1:-1})),this.changed=!1,e):e},OrderingModule.prototype.toggle=function(e){this._columnName=e,this._direction=i.OrderingCycleMap[(i.OrderingCycleMap.indexOf(this.direction)+1)%i.OrderingCycleMap.length],this.notifyChange()},OrderingModule.prototype.digestServerResponse=function(e){t.isUndefined(e.column)||(this._columnName=e.column),t.isUndefined(e.direction)||(this._direction=e.direction),this.eventDispatcher.dispatch(i.OrderingEvents.Invalidated),this.changed=!1},OrderingModule.prototype.onChange=function(e){return this.eventDispatcher.subscribe(i.OrderingEvents.Changed,e)},OrderingModule.prototype.onInvalidate=function(e){return this.eventDispatcher.subscribe(i.OrderingEvents.Invalidated,e)},OrderingModule.prototype.notifyChange=function(){this.changed=!0,this.eventDispatcher.dispatch(i.OrderingEvents.Changed)},OrderingModule}();exports.OrderingModule=r;
