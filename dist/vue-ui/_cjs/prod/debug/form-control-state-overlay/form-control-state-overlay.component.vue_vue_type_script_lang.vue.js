/*!
 * Banquette VueUi v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";var e=require("../../_virtual/_tslib.js"),t=require("@banquette/utils-misc/_cjs/prod/are-equal"),r=require("@banquette/utils-type/_cjs/prod/is-array"),o=require("@banquette/utils-type/_cjs/prod/is-boolean"),n=require("@banquette/utils-type/_cjs/prod/is-function"),a=require("@banquette/utils-type/_cjs/prod/is-object"),i=require("@banquette/utils-type/_cjs/prod/is-undefined"),u=require("@banquette/vue-material-icons/_cjs/prod/bug-report"),l=require("@banquette/vue-material-icons/_cjs/prod/close"),p=require("@banquette/vue-typescript/_cjs/prod/decorator/component.decorator"),s=require("@banquette/vue-typescript/_cjs/prod/decorator/computed.decorator"),c=require("@banquette/vue-typescript/_cjs/prod/decorator/expose.decorator"),m=require("@banquette/vue-typescript/_cjs/prod/decorator/prop.decorator"),d=require("@banquette/vue-typescript/_cjs/prod/decorator/template-ref.decorator"),y=require("@banquette/vue-typescript/_cjs/prod/vue");require("../../misc/call/call.component.vue.js"),require("../../misc/conditional-wrapper/conditional-wrapper.component.vue.js"),require("../../misc/remote/remote.component.vue.js"),require("../../misc/teleport/teleport.component.vue.js"),require("../../misc/click-outside.directive.js"),require("../../misc/collapsable.directive.js");var v=require("../../misc/stick-to.directive.js");require("../../misc/teleport.directive.js"),require("@banquette/api/_cjs/prod/api.service"),require("@banquette/dependency-injection/_cjs/prod/injector"),require("@banquette/utils-misc/_cjs/prod/proxy"),require("@banquette/vue-typescript/_cjs/prod/vue-builder"),require("../../misc/client-only.component.vue.js");var b=function(y){function FormControlStateOverlayComponent(){var e=null!==y&&y.apply(this,arguments)||this;return e.visible=!1,e.knownKeys=[],e._groups=[],e}return e.__extends(FormControlStateOverlayComponent,y),Object.defineProperty(FormControlStateOverlayComponent.prototype,"overlayOptions",{get:function(){return{target:this.target,placement:"right",popper:{modifiers:{name:"offset",options:{offset:[0,5]}}}}},enumerable:!1,configurable:!0}),Object.defineProperty(FormControlStateOverlayComponent.prototype,"groups",{get:function(){var e=this,o=Object.keys(this.v).reduce((function(t,r){return t.push("".concat(r,":").concat(typeof e.v[r])),a.isObject(e.v[r])?t.concat(Object.keys(e.v[r]).map((function(t){return"".concat(r,".").concat(t,":").concat(typeof e.v[r][t])}))):t}),[]).sort();if(t.areEqual(o,this.knownKeys))return this._groups;var n={};this._groups=[];for(var _loop_1=function(t){var o=i.v[t];if(a.isObject(o)&&!r.isArray(o)){var u={name:t,values:Object.keys(o).sort((function(e,t){var r={string:0,number:1e3,bigint:1e3,boolean:2e3,object:3e3,symbol:4e3,undefined:5e3};return r[typeof o[e]]+e.localeCompare(t)+1-(r[typeof o[t]]+t.localeCompare(e)+1)})).reduce((function(r,o){return e.createValueProxy(r,[t,o]),r}),{})};Object.keys(u.values).length>0&&i._groups.push(u)}else i.createValueProxy(n,[t])},i=this,u=0,l=Object.keys(this.v);u<l.length;u++){_loop_1(l[u])}return this._groups.sort((function(e,t){return e.name.localeCompare(t.name)})),Object.keys(n).length>0&&this._groups.push({name:"Type specific",values:n}),this.knownKeys=o,this._groups},enumerable:!1,configurable:!0}),FormControlStateOverlayComponent.prototype.toggle=function(){this.visible=!this.visible},FormControlStateOverlayComponent.prototype.hide=function(){this.visible=!1},FormControlStateOverlayComponent.prototype.toggleValueDetail=function(e){e.fullValueVisible=!e.fullValueVisible,this.$forceUpdate()},FormControlStateOverlayComponent.prototype.createValueProxy=function(e,t){var r=this,getValue=function(){for(var e=r.v,o=0;o<t.length-1;++o){if(!a.isObject(e))return;e=e[t[o]]}return e[t[t.length-1]]};if(!n.isFunction(getValue())){var i={name:t[t.length-1],rawValue:void 0,shortValue:void 0,fullValue:void 0,fullValueVisible:!1,isBoolean:!1};Object.defineProperty(e,t[t.length-1],{configurable:!0,enumerable:!0,get:function(){i.rawValue=getValue();var e=r.normalizeValue(i.rawValue);return i.shortValue=e.length>50?e.substring(0,50)+" [...]":e,i.fullValue=e.length>50?e:null,i.isBoolean=o.isBoolean(i.rawValue),i}})}},FormControlStateOverlayComponent.prototype.normalizeValue=function(e){return i.isUndefined(e)?"undefined":null===e?"null":a.isObject(e)?JSON.stringify(e,null,4):String(e)},e.__decorate([m.Prop({type:Object,required:!0}),e.__metadata("design:type",Object)],FormControlStateOverlayComponent.prototype,"v",void 0),e.__decorate([c.Expose(),e.__metadata("design:type",Boolean)],FormControlStateOverlayComponent.prototype,"visible",void 0),e.__decorate([s.Computed(),e.__metadata("design:type",Object),e.__metadata("design:paramtypes",[])],FormControlStateOverlayComponent.prototype,"overlayOptions",null),e.__decorate([s.Computed(),e.__metadata("design:type",Object),e.__metadata("design:paramtypes",[])],FormControlStateOverlayComponent.prototype,"groups",null),e.__decorate([d.TemplateRef("target"),e.__metadata("design:type",Element)],FormControlStateOverlayComponent.prototype,"target",void 0),e.__decorate([c.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],FormControlStateOverlayComponent.prototype,"toggle",null),e.__decorate([c.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],FormControlStateOverlayComponent.prototype,"hide",null),e.__decorate([c.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[Object]),e.__metadata("design:returntype",void 0)],FormControlStateOverlayComponent.prototype,"toggleValueDetail",null),FormControlStateOverlayComponent=e.__decorate([p.Component({name:"bt-form-control-state-overlay",components:[u.IconMaterialBugReport,l.IconMaterialClose],directives:[v.StickToDirective]})],FormControlStateOverlayComponent)}(y.Vue);module.exports=b;
