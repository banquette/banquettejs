/*!
 * Banquette VueUi v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../_virtual/_tslib.js"),t=require("@banquette/dependency-injection/_cjs/prod/decorator/inject.decorator"),r=require("@banquette/dependency-injection/_cjs/prod/decorator/service.decorator"),i=require("@banquette/dependency-injection/_cjs/prod/injector"),n=require("@banquette/event/_cjs/prod/event-dispatcher.service"),s=require("@banquette/utils-misc/_cjs/prod/proxy"),o=require("@banquette/utils-type/_cjs/prod/ensure-boolean"),u=require("@banquette/utils-type/_cjs/prod/is-string"),l=require("@banquette/vue-typescript/_cjs/prod/vue-builder"),a=require("vue");require("./component/alerts-stack/alerts-stack.component.vue.js");var c=require("./constant.js"),p=require("./event/show-alert.event.js"),v=require("./component/alerts-stack/alerts-stack.component.vue_vue_type_script_lang.vue.js"),h=function(){function AlertService(e){this.eventDispatcher=e,this.queue=[]}return AlertService.prototype.show=function(e,t,r){this.showAlert(this.normalizeShortenedOptions(e,t,r))},AlertService.prototype.hideAll=function(){this.eventDispatcher.dispatch(c.AlertEvents.HideAll)},AlertService.prototype.showAlert=function(e){this.flushQueue();var t=this.eventDispatcher.dispatch(c.AlertEvents.Show,new p.ShowAlertEvent(e));if(!t.error&&t.results.indexOf(!0)<0){if(!this.queue.length){var r=document.createElement("div");a.createApp(v).mount(r),document.body.appendChild(r),setTimeout(s.proxy(this.flushQueue,this))}this.queue.push(e)}},AlertService.prototype.flushQueue=function(){var e=this.queue;this.queue=[];for(var t=0,r=e;t<r.length;t++){var i=r[t];this.showAlert(i)}},AlertService.prototype.normalizeShortenedOptions=function(e,t,r){return u.isString(e)?this.normalizeShortenedOptions({message:e,variant:t||"",ttl:r||null}):Object.assign({},{variant:e.variant,message:e.message,title:e.title||null,icon:e.icon||null,ttl:e.ttl||null,closable:o.ensureBoolean(e.closable),stack:e.stack,allowHtml:e.allowHtml||!1,position:e.position})},AlertService=e.__decorate([r.Service(),e.__param(0,t.Inject(n.EventDispatcherService)),e.__metadata("design:paramtypes",[n.EventDispatcherService])],AlertService)}();l.VueBuilder.RegisterGlobalProperty("btShowAlert",(function(e,t,r){i.Injector.Get(h).show(e,t,r)})),l.VueBuilder.RegisterGlobalProperty("btHideAllAlerts",(function(){i.Injector.Get(h).hideAll()})),exports.AlertService=h;
