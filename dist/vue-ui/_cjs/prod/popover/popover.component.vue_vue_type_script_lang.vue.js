/*!
 * Banquette VueUi v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";var e=require("../_virtual/_tslib.js"),t=require("@banquette/utils-misc/_cjs/prod/is-server"),o=require("@banquette/utils-type/_cjs/prod/is-numeric"),r=require("@banquette/vue-typescript/_cjs/prod/decorator/component.decorator"),n=require("@banquette/vue-typescript/_cjs/prod/decorator/computed.decorator"),p=require("@banquette/vue-typescript/_cjs/prod/decorator/expose.decorator"),i=require("@banquette/vue-typescript/_cjs/prod/decorator/import.decorator"),a=require("@banquette/vue-typescript/_cjs/prod/decorator/prop.decorator"),s=require("@banquette/vue-typescript/_cjs/prod/decorator/themeable.decorator"),d=require("@banquette/vue-typescript/_cjs/prod/decorator/watch.decorator"),u=require("@banquette/vue-typescript/_cjs/prod/theme/bind-theme.directive"),c=require("@banquette/vue-typescript/_cjs/prod/vue");require("../misc/call/call.component.vue.js"),require("../misc/conditional-wrapper/conditional-wrapper.component.vue.js"),require("../misc/remote/remote.component.vue.js"),require("../misc/teleport/teleport.component.vue.js"),require("../misc/click-outside.directive.js"),require("../misc/collapsable.directive.js");var l=require("../misc/stick-to.directive.js");require("../misc/teleport.directive.js"),require("@banquette/api/_cjs/prod/api.service"),require("@banquette/dependency-injection/_cjs/prod/injector"),require("@banquette/utils-misc/_cjs/prod/proxy"),require("@banquette/vue-typescript/_cjs/prod/vue-builder"),require("../misc/client-only.component.vue.js");var m=require("./popover.composable.js"),v=require("./theme-configuration.js"),_=require("../misc/client-only.component.vue_vue_type_script_lang.vue.js"),y=require("../misc/teleport/teleport.component.vue_vue_type_script_lang.vue.js"),b=function(c){function PopoverComponent(){var e=null!==c&&c.apply(this,arguments)||this;return e.shouldRender=!1,e.isVisible=!1,e.highestZIndex=null,e}return e.__extends(PopoverComponent,c),Object.defineProperty(PopoverComponent.prototype,"teleportTarget",{get:function(){return"auto"===this.popoverComposable.config.teleport&&this.shouldTeleportToBody()||!this.popoverComposable.config.teleport&&this.popoverComposable.config.stickToOptions.target instanceof SVGElement?"body":"auto"===this.popoverComposable.config.teleport?null:this.popoverComposable.config.teleport},enumerable:!1,configurable:!0}),Object.defineProperty(PopoverComponent.prototype,"styles",{get:function(){var e={};return this.popoverComposable&&("auto"===this.popoverComposable.config.zIndex?null!==this.highestZIndex&&(e.zIndex=this.highestZIndex):e.zIndex=this.popoverComposable.config.zIndex),e},enumerable:!1,configurable:!0}),PopoverComponent.prototype.beforeMount=function(){this.popoverComposable.config.stickToOptions.enabled=!1},PopoverComponent.prototype.mounted=function(){this.highestZIndex=this.findHighestZIndex()},PopoverComponent.prototype.updated=function(){this.popoverComposable.config.stickToOptions.forceUpdate()},PopoverComponent.prototype.onEnter=function(){this.popoverComposable.config.stickToOptions.forceUpdate()},PopoverComponent.prototype.hasNonEmptySlot=function(e){return c.prototype.hasNonEmptySlot.call(this,e)},PopoverComponent.prototype.onAfterLeave=function(){this.popoverComposable.config.visible||(this.shouldRender=!1,this.popoverComposable.config.stickToOptions.enabled=!1,this.$forceUpdate())},PopoverComponent.prototype.onVisibilityChange=function(e){var t=this;e?(this.shouldRender=!0,this.popoverComposable.config.stickToOptions.enabled=e,this.$forceUpdate(),setTimeout((function(){t.isVisible=!0}))):this.isVisible=!1},PopoverComponent.prototype.shouldTeleportToBody=function(){if(t.isServer())return!1;for(var e=this.$el;e instanceof Element;){if("visible"!==window.getComputedStyle(e).overflow)return!0;e=e.parentElement}return!1},PopoverComponent.prototype.findHighestZIndex=function(){if(t.isServer())return null;for(var e=this.$el,r=null;e instanceof Element;){var n=window.getComputedStyle(e);o.isNumeric(n.zIndex)&&(r=Math.max(null!==r?r:-1/0,parseInt(n.zIndex,10))),e=e.parentElement}return r},e.__decorate([i.Import(m.PopoverComposable,!1),e.__metadata("design:type",m.PopoverComposable)],PopoverComponent.prototype,"popoverComposable",void 0),e.__decorate([a.Prop({type:[String,Boolean],default:void 0}),e.__metadata("design:type",Object)],PopoverComponent.prototype,"transition",void 0),e.__decorate([a.Prop({type:Boolean,default:!1}),e.__metadata("design:type",Boolean)],PopoverComponent.prototype,"renderHidden",void 0),e.__decorate([n.Computed(),e.__metadata("design:type",Object),e.__metadata("design:paramtypes",[])],PopoverComponent.prototype,"teleportTarget",null),e.__decorate([n.Computed(),e.__metadata("design:type",Object),e.__metadata("design:paramtypes",[])],PopoverComponent.prototype,"styles",null),e.__decorate([p.Expose(),e.__metadata("design:type",Boolean)],PopoverComponent.prototype,"shouldRender",void 0),e.__decorate([p.Expose(),e.__metadata("design:type",Boolean)],PopoverComponent.prototype,"isVisible",void 0),e.__decorate([p.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],PopoverComponent.prototype,"updated",null),e.__decorate([p.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],PopoverComponent.prototype,"onEnter",null),e.__decorate([p.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[String]),e.__metadata("design:returntype",Boolean)],PopoverComponent.prototype,"hasNonEmptySlot",null),e.__decorate([p.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],PopoverComponent.prototype,"onAfterLeave",null),e.__decorate([d.Watch("config.visible"),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[Object]),e.__metadata("design:returntype",void 0)],PopoverComponent.prototype,"onVisibilityChange",null),PopoverComponent=e.__decorate([s.Themeable(v.ThemeConfiguration),r.Component({name:"bt-popover",components:[_,y],directives:[l.StickToDirective,u.BindThemeDirective],inheritAttrs:!1})],PopoverComponent)}(c.Vue);module.exports=b;
