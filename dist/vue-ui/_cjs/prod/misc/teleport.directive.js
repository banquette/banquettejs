/*!
 * Banquette VueUi v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../_virtual/_tslib.js"),t=require("@banquette/exception/_cjs/prod/usage.exception"),r=require("@banquette/utils-string/_cjs/prod/is-non-empty-string"),i=require("@banquette/utils-type/_cjs/prod/ensure-array"),n=require("@banquette/utils-type/_cjs/prod/is-function"),o=require("@banquette/utils-type/_cjs/prod/is-object"),p=require("@banquette/utils-type/_cjs/prod/is-undefined"),u=require("@banquette/vue-typescript/_cjs/prod/decorator/directive.decorator"),l=function(){function TeleportDirective(){this.teleported=[]}return TeleportDirective.prototype.created=function(e,t){this.doTeleport(e,t)},TeleportDirective.prototype.updated=function(e,t){this.doTeleport(e,t)},TeleportDirective.prototype.unmounted=function(){for(var e=0,t=this.teleported;e<t.length;e++){var r=t[e];r.comment.replaceWith(r.el)}this.teleported=[]},TeleportDirective.prototype.doTeleport=function(e,t){for(var r=this.resolveOptions(t),n=i.ensureArray(r.target),o=[],_loop_1=function(t){if(!p.isUndefined(t)){var i=null!==r.ref?t.$refs[r.ref]:null;if(i instanceof HTMLElement){var n=u.teleported.findIndex((function(e){return e.el===i})),l=void 0;n>-1?l=u.teleported[n].comment:(l=document.createComment("bt-teleport"),i.replaceWith(l),e.appendChild(i)),o.push({el:i,comment:l})}else console.warn('Ref "'.concat(r.ref,'" not found.'))}},u=this,l=0,c=n;l<c.length;l++){_loop_1(c[l])}for(var _loop_2=function(e){o.findIndex((function(t){return t.el===e.el}))<0&&e.comment.replaceWith(e.el)},s=0,a=this.teleported;s<a.length;s++){_loop_2(a[s])}this.teleported=o},TeleportDirective.prototype.resolveOptions=function(e){var r=e.value;if(n.isFunction(r)&&(r=r()),!this.isOptionsInterface(r))throw new t.UsageException('Invalid binding value for "bt-teleport".');return r},TeleportDirective.prototype.isOptionsInterface=function(e){return o.isObject(e)&&r.isNonEmptyString(e.ref)},TeleportDirective=e.__decorate([u.Directive("bt-teleport")],TeleportDirective)}();exports.TeleportDirective=l;
