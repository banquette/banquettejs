/*!
 * Banquette VueUi v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../_virtual/_tslib.js"),t=require("@banquette/utils-misc/_cjs/prod/proxy"),i=require("@banquette/utils-type/_cjs/prod/is-function"),n=require("@banquette/utils-type/_cjs/prod/is-object"),r=require("@banquette/utils-type/_cjs/prod/is-undefined"),u=require("@banquette/vue-typescript/_cjs/prod/decorator/directive.decorator"),l=function(){function ClickOutsideDirective(){this.enabled=!0,this.callback=null,this.unbindHandler=null}return ClickOutsideDirective.prototype.beforeMount=function(e,t){this.updated(e,t)},ClickOutsideDirective.prototype.updated=function(e,t){this.el=e,n.isObject(t.value)?(this.enabled=!!r.isUndefined(t.value.enabled)||!!t.value.enabled,this.callback=t.value.callback||null):i.isFunction(t.value)&&(this.callback=t.value),this.enabled?this.bindHandler(this.resolveHandlerType(t)):this.unbind()},ClickOutsideDirective.prototype.unmounted=function(){this.unbind()},ClickOutsideDirective.prototype.bindHandler=function(e){this.unbind();var i=t.proxy(this.onTrigger,this);window.addEventListener(e,i),this.unbindHandler=function(){return window.removeEventListener(e,i)}},ClickOutsideDirective.prototype.unbind=function(){this.unbindHandler&&(this.unbindHandler(),this.unbindHandler=null)},ClickOutsideDirective.prototype.onTrigger=function(e){var t=e.target;(t instanceof HTMLElement||t instanceof SVGElement)&&!this.isOutside(t)||(null!==this.callback&&this.callback(),this.el.dispatchEvent(new CustomEvent("click-outside")))},ClickOutsideDirective.prototype.resolveHandlerType=function(e){return n.isObject(e.value)&&e.value.eventType||"mousedown"},ClickOutsideDirective.prototype.isOutside=function(e){if(this.el===e||this.el.contains(e))return!1;for(;e;){if(e.dataset.teleportedFrom){var t=document.getElementById(e.dataset.teleportedFrom);return null!==t&&!this.el.contains(t)}if(!e.parentElement)break;e=e.parentElement}return!0},ClickOutsideDirective=e.__decorate([u.Directive("bt-click-outside")],ClickOutsideDirective)}();exports.ClickOutsideDirective=l;
