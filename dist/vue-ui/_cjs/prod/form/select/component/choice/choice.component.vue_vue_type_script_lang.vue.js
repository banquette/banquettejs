/*!
 * Banquette VueUi v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";var e=require("../../../../_virtual/_tslib.js"),t=require("@banquette/exception/_cjs/prod/usage.exception"),o=require("@banquette/utils-string/_cjs/prod/format/trim"),i=require("@banquette/utils-type/_cjs/prod/is-undefined"),n=require("@banquette/vue-material-icons/_cjs/prod/check"),a=require("@banquette/vue-material-icons/_cjs/prod/delete"),c=require("@banquette/vue-typescript/_cjs/prod/decorator/component.decorator"),r=require("@banquette/vue-typescript/_cjs/prod/decorator/expose.decorator"),s=require("@banquette/vue-typescript/_cjs/prod/decorator/inject-provided.decorator"),p=require("@banquette/vue-typescript/_cjs/prod/decorator/prop.decorator"),l=require("@banquette/vue-typescript/_cjs/prod/decorator/watch.decorator"),d=require("@banquette/vue-typescript/_cjs/prod/vue"),h=require("vue"),u=require("../../../constant.js"),m=require("../../constant.js"),_=function(d){function ChoiceComponent(){var e,t,o,n=null!==d&&d.apply(this,arguments)||this;return n.choice=null,n.scrollIntoView=(e=0,t=null,o=function(){if(n.$el.offsetParent){var i=n.$el.parentNode.offsetHeight,a=n.$el.offsetHeight;n.$el.parentNode.scrollTop=n.$el.offsetTop-(i/2-a/2),t&&window.clearTimeout(t),t=null}else e<20&&(t=window.setTimeout(o),++e)},function(){null===t&&n.choice&&!i.isUndefined(n.$el.scrollIntoView)&&(e=0,o())}),n}return e.__extends(ChoiceComponent,d),ChoiceComponent.prototype.beforeMount=function(){var e=this.getParent("bt-form-select");if(null===e)throw new t.UsageException('A "<bt-form-select-choice>" component must be placed inside a "<bt-form-select>".');this.parent=e,this.parentGroup=this.getParent("bt-form-select-group")},ChoiceComponent.prototype.unmounted=function(){null===this.internalChoice&&null!==this.choice&&this.parent&&this.parent.vm&&this.parent.vm.removeChoice(this.choice)},ChoiceComponent.prototype.select=function(){this.choice&&this.parent.vm.selectChoice(this.choice)},ChoiceComponent.prototype.deselect=function(){this.choice&&this.parent.vm.deselectChoice(this.choice.identifier)},ChoiceComponent.prototype.remove=function(){this.choice&&(this.choice.selected&&this.deselect(),this.parent.vm.removeChoice(this.choice))},ChoiceComponent.prototype.resolveLabel=function(e){if(null!==this.label)return this.label;if(!i.isUndefined(this.$slots.default)){var t=o.trim(this.getVNodesText(this.$slots.default()));return t.length>0?t:e.label?e.label:(console.warn('No text could be extracted from the slot content. Please define a label using the "label" prop for choice with value:',this.value),"(empty label)")}return e.label?e.label:(console.warn("No label have been found for choice with value:",this.value,'Please define one using the "label" prop.'),"(missing label)")},ChoiceComponent.prototype.onInternalChoiceChange=function(e){this.choice&&e&&h.toRaw(this.choice)===h.toRaw(e)||(e?this.choice=e:(this.choice=this.parent.vm.normalizeChoice(this.value===u.UndefinedValue?this.getSlotTextContent("default"):this.value,"before"===this.position?m.BeforeSlotOrigin:m.AfterSlotOrigin),null!==this.choice&&(this.choice.external=!0,this.choice.label=this.resolveLabel(this.choice),this.choice.disabled=!!this.disabled,this.choice.group=null,this.parent&&this.parent.vm.appendChoices([this.choice]))))},ChoiceComponent.prototype.onFocusChange=function(e){e&&this.scrollIntoView()},ChoiceComponent.prototype.onVisibilityChange=function(){this.parentGroup&&this.choice&&this.parentGroup.updateChoice(this.choice)},ChoiceComponent.prototype.onChoicePropsChange=function(){this.choice&&(i.isUndefined(this.disabled)||(this.choice.disabled=this.disabled),i.isUndefined(this.selected)||(this.selected&&!this.choice.selected?this.parent.selectChoice(this.choice):!this.selected&&this.choice.selected&&this.parent.deselectChoice(this.choice.identifier)))},e.__decorate([p.Prop({default:u.UndefinedValue}),e.__metadata("design:type",Object)],ChoiceComponent.prototype,"value",void 0),e.__decorate([p.Prop({type:String,default:null}),e.__metadata("design:type",Object)],ChoiceComponent.prototype,"label",void 0),e.__decorate([p.Prop({type:Boolean,default:void 0}),e.__metadata("design:type",Boolean)],ChoiceComponent.prototype,"disabled",void 0),e.__decorate([p.Prop({type:Boolean,default:void 0}),e.__metadata("design:type",Boolean)],ChoiceComponent.prototype,"selected",void 0),e.__decorate([p.Prop({type:Object,default:null}),e.__metadata("design:type",Object)],ChoiceComponent.prototype,"internalChoice",void 0),e.__decorate([s.InjectProvided("position",null),e.__metadata("design:type",Object)],ChoiceComponent.prototype,"position",void 0),e.__decorate([r.Expose(),e.__metadata("design:type",Object)],ChoiceComponent.prototype,"choice",void 0),e.__decorate([r.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],ChoiceComponent.prototype,"select",null),e.__decorate([r.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],ChoiceComponent.prototype,"deselect",null),e.__decorate([r.Expose(),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],ChoiceComponent.prototype,"remove",null),e.__decorate([l.Watch("internalChoice",{immediate:l.ImmediateStrategy.NextTick}),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[Object]),e.__metadata("design:returntype",void 0)],ChoiceComponent.prototype,"onInternalChoiceChange",null),e.__decorate([l.Watch("choice.focused",{immediate:l.ImmediateStrategy.Mounted}),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[Object]),e.__metadata("design:returntype",void 0)],ChoiceComponent.prototype,"onFocusChange",null),e.__decorate([l.Watch("choice.visible",{immediate:l.ImmediateStrategy.NextTick}),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],ChoiceComponent.prototype,"onVisibilityChange",null),e.__decorate([l.Watch((function(){return null===this.internalChoice?["value","label","disabled","selected"]:[]}),{immediate:l.ImmediateStrategy.NextTick}),e.__metadata("design:type",Function),e.__metadata("design:paramtypes",[]),e.__metadata("design:returntype",void 0)],ChoiceComponent.prototype,"onChoicePropsChange",null),ChoiceComponent=e.__decorate([c.Component({name:"bt-form-select-choice",components:[n.IconMaterialCheck,a.IconMaterialDelete]})],ChoiceComponent)}(d.Vue);module.exports=_;
