/*!
 * Banquette Api v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_virtual/_tslib.js"),t=require("@banquette/dependency-injection/_cjs/prod/decorator/service.decorator"),i=require("@banquette/utils-type/_cjs/prod/is-function"),n=require("@banquette/utils-type/_cjs/prod/is-null-or-undefined"),o=require("@banquette/utils-type/_cjs/prod/is-string"),r=require("@banquette/utils-type/_cjs/prod/is-undefined"),p=require("./api-endpoint.js"),s=require("./api-endpoint-collection.js"),c=require("./exception/endpoint-not-found.exception.js"),a=function(){function ApiEndpointStorageService(){this.collectionsMap=new WeakMap}var a;return a=ApiEndpointStorageService,ApiEndpointStorageService.prototype.registerEndpoint=function(e,t,n,p,c){c=this.resolveCtor(o.isString(e)?i.isFunction(n)?n:c:e.ctor);var a=this.collectionsMap.get(c);r.isUndefined(a)&&(a=new s.ApiEndpointCollection,this.collectionsMap.set(c,a)),a.registerEndpoint(e,t,n,p)},ApiEndpointStorageService.prototype.getEndpoint=function(e,t){t=this.resolveCtor(t);var i=this.collectionsMap.get(t);if(r.isUndefined(i)||!i.hasEndpoint(e)){var n=t!==p.ApiEndpoint?' for constructor "'.concat(t.name,'".'):"";throw new c.EndpointNotFoundException(e,'No endpoint "'.concat(e,'" has been defined found').concat(n,"."))}return i.getEndpoint(e)},ApiEndpointStorageService.prototype.hasEndpoint=function(e,t){t=this.resolveCtor(t);var i=this.collectionsMap.get(t);return!r.isUndefined(i)&&i.hasEndpoint(e)},ApiEndpointStorageService.prototype.removeEndpoint=function(e,t){t=this.resolveCtor(t);var i=this.collectionsMap.get(t);r.isUndefined(i)||i.removeEndpoint(e)},ApiEndpointStorageService.prototype.clear=function(e){if(null!==e){e=this.resolveCtor(e);var t=this.collectionsMap.get(e);r.isUndefined(t)||t.clear()}else this.collectionsMap=new WeakMap},ApiEndpointStorageService.prototype.resolveCtor=function(e){return n.isNullOrUndefined(e)?a:e},ApiEndpointStorageService=a=e.__decorate([t.Service(),e.__metadata("design:paramtypes",[])],ApiEndpointStorageService)}();exports.ApiEndpointStorageService=a;
