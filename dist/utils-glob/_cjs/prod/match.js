/*!
 * Banquette UtilsGlob v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@banquette/utils-array/_cjs/prod/trim-array"),e=require("@banquette/utils-string/_cjs/prod/format/escape-regex"),r=require("./constant.js");exports.match=function match(n,a,l){void 0===l&&(l=[]);var i={pattern:r.MatchType.Full,tags:r.MatchType.Full};if(n===a)return i;var u=t.trimArray(n.split(":"));if(u.length>1){var h=u.slice(1),c=h.filter((function(t){return l.indexOf(t)>-1}));i.tags=h.length===c.length?r.MatchType.Full:c.length>0?r.MatchType.Partial:r.MatchType.None}return""===u[0]||(i.pattern=function matchPattern(n,a){var l=0;"/"===a[a.length-1]&&(a=a.substring(0,a.length-2));for(var i=a.split("/"),matchPart=function(r){if("*"===r)return!0;if("{"===r[0]){for(var n=0,a=t.trimArray(r.substring(1,r.length-1).split(","));n<a.length;n++){var u=a[n];if(matchPart(u))return!0}return!1}if(r.indexOf("*")>=0){var h=new RegExp(e.escapeRegex(r.replace(/\*/g,"#")).replace(/#/g,".*"));return null!==i[l].match(h)}return r===i[l]},u=!1,h=n.split("/").filter((function(t,e,r){return 0===e||"**"!==t||t!==r[e-1]})),c=0;c<h.length;++c){var p=h[c];if("**"===p){if(c>=h.length-1)return r.MatchType.Full;if("*"===h[c+1])return l>=i.length?r.MatchType.Partial:r.MatchType.Full;var g=void 0,f=!1;for(g=++c;g<h.length&&l<i.length&&!(f=matchPart(h[g]));++l);if(!f&&(g>=h.length||l>=i.length))return r.MatchType.Partial;u=!0}else{if(l>=i.length)return c===h.length-1&&"**"===h[c]?r.MatchType.Full:r.MatchType.Partial;if(!matchPart(p))return u?r.MatchType.Partial:r.MatchType.None}++l}return l<i.length?r.MatchType.None:r.MatchType.Full}(u[0],a)),i};
