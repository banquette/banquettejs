/*!
 * Banquette VueTypescript v0.0.0 (CommonJS)
 * (c) 2022-2022 Julien Pinto
 * Released under Apache License, Version 2.0
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_virtual/_tslib.js"),t=require("@banquette/exception/_cjs/prod/usage.exception"),n=require("@banquette/utils-object/_cjs/prod/extend"),r=require("@banquette/utils-object/_cjs/prod/get-object-keys"),o=require("@banquette/utils-type/_cjs/prod/is-array"),i=require("@banquette/utils-type/_cjs/prod/is-constructor"),s=require("@banquette/utils-type/_cjs/prod/is-function"),p=require("@banquette/utils-type/_cjs/prod/is-numeric"),a=require("@banquette/utils-type/_cjs/prod/is-object"),c=require("@banquette/utils-type/_cjs/prod/is-string"),u=require("@banquette/utils-type/_cjs/prod/is-undefined"),f=require("./build-setup-method.js"),l=require("./constants.js"),m=require("./utils/converters.js"),d=require("./utils/define-getter.js"),h=require("./utils/get-or-create-component-metadata.js"),b=require("./utils/guards.js"),O=require("./utils/inject-vue-properties.js"),v=require("./utils/resolve-import-public-name.js"),y=require("./vue-builder.js"),g=new WeakMap;exports.generateVccOpts=function generateVccOpts(A,T){if(!u.isUndefined(A.prototype[l.DECORATORS_METADATA_CACHE])&&A.prototype[l.DECORATORS_METADATA_CACHE][l.COMPONENT_CTOR]===A)return A.prototype[l.DECORATORS_METADATA_CACHE];for(var C={},$=A,q="inherit"===T.component.template;null!==($=Object.getPrototypeOf($));){var j=u.isUndefined($.prototype)?null:$.prototype[l.DECORATORS_METADATA];if(null!==j&&a.isObject(j)){if(!u.isUndefined(j.component)&&s.isFunction(j.component.factory)&&!s.isFunction(T.component.factory))throw new t.UsageException('You must define a factory function for "'.concat(T.component.name,'" because it inherits ')+'from "'.concat(j.component.name,'" which defines one. '));q&&j.component&&c.isString(j.component.template)&&(T.component.template=j.component.template,q=!1),T=n.extend({},[j,T],!0)}}for(var E={},_=0,N=Object.keys(T.props);_<N.length;_++){var G=N[_];E[T.props[G].name||G]=e.__assign({},T.props[G])}if(T.themeable){if(!u.isUndefined(E[T.themeable.prop]))throw new t.UsageException('A prop named "'.concat(T.themeable.prop,'" is already defined, ')+'please define another name for the prop that defines the name of the variant to use. You can set the "prop" option of the "@Themeable" decorator for that.');E[T.themeable.prop]={propertyName:T.themeable.prop,type:String,default:null}}T.props=E,C.props=E;for(var U=0,M=Object.keys(T.imports);U<M.length;U++){var S=M[U],w=T.imports[S],P=w.composable;if(b.isDecoratedComponentConstructor(P))for(var R=h.getOrCreateComponentMetadata(P.prototype),x=0,D=Object.keys(R.props);x<D.length;x++){var k=D[x],V=v.resolveImportPublicName(S,k,w.prefixOrAlias);!1!==V&&(u.isUndefined(C[V])||console.warn('The prop "'.concat(k,'" from the composable "').concat(P.name,'" overrides an already defined prop with the same name (').concat(V,").")),C.props[V]=R.props[k],C.props[V].propertyName=V)}}if(!u.isUndefined(T.component.components)){C.components={};for(var H=0,F=r.getObjectKeys(T.component.components);H<F.length;H++){var I=F[H],K=T.component.components[I],Y=i.isConstructor(K)?K:b.isVccOpts(K)?m.vccOptsToCtor(K):null;if(null!==Y){var B=h.getOrCreateComponentMetadata(Y.prototype),W=u.isUndefined(B.component)?I:B.component.name;C.components[W]=K}else if(p.isNumeric(I)){if(!c.isString(K.name))throw new t.UsageException('You must provide a name for the components added to the "components" option if they don\'t use `VueTypescript`.');C.components[K.name]=K}else C.components[I]=K}}if(!u.isUndefined(T.component.directives)){C.directives={};for(var z=0,J=r.getObjectKeys(T.component.directives);z<J.length;z++){I=J[z];var L=T.component.directives[I],Q=y.VueBuilder.GetDirectiveDefinition(L);null!==Q&&(C.directives[Q.name]=Q.directive)}}for(var X=0,Z=l.PRE_CONSTRUCTION_HOOKS;X<Z.length;X++){var ee=Z[X];s.isFunction(A.prototype[ee])&&(C[ee]=A.prototype[ee])}for(var te=0,ne=r.getObjectKeys(l.HOOKS_MAP);te<ne.length;te++){ee=ne[te];s.isFunction(A.prototype[ee])&&(o.isArray(T.hooks[ee])||(T.hooks[ee]=[]),T.hooks[ee].indexOf(ee)<0&&T.hooks[ee].push(ee))}C.emits=T.component.emits,C.setup=f.buildSetupMethod(A,T);var re=g.get(A);return u.isUndefined(re)?g.set(A,C):O.injectVueProperties(re,C),O.injectVueProperties(A,C),Object.defineProperty(A.prototype,l.DECORATORS_METADATA_CACHE,{enumerable:!1,configurable:!0,writable:!1,value:C}),Object.defineProperty(C,l.COMPONENT_CTOR,{enumerable:!1,configurable:!0,writable:!1,value:A}),C.beforeCreate=function(){var e=this,t=this.$[l.COMPONENT_TS_INSTANCE],n=this;Object.defineProperty(t,l.COMPONENT_VUE_INSTANCE,{enumerable:!1,configurable:!1,writable:!1,value:this}),d.defineGetter(this,"$plugins",(function(){return n})),d.defineGetter(t,"$",(function(){return e.$})),d.defineGetter(t,"$props",(function(){return e.$props})),d.defineGetter(t,"$attrs",(function(){return e.$attrs})),d.defineGetter(t,"$slots",(function(){return e.$slots})),d.defineGetter(t,"$emit",(function(){return e.$emit})),d.defineGetter(t,"$data",(function(){return e.$data})),d.defineGetter(t,"$el",(function(){return e.$el})),d.defineGetter(t,"$options",(function(){return e.$options})),d.defineGetter(t,"$refs",(function(){return e.$refs})),d.defineGetter(t,"$root",(function(){return e.$root})),d.defineGetter(t,"$forceUpdate",(function(){return e.$forceUpdate})),d.defineGetter(t,"$nextTick",(function(){return e.$nextTick})),d.defineGetter(t,"$watch",(function(){return e.$watch})),d.defineGetter(t,"$parent",(function(){return e.$parent})),d.defineGetter(this,"$resolvedParent",(function(){var e=n.$parent;return null!==e?m.maybeResolveTsInst(e):null}))},!1===T.component.template?C.render=function(){return!1}:"inherit"===T.component.template&&s.isFunction(A.render)?C.render=A.render:c.isString(T.component.template)&&(C.template=T.component.template),u.isUndefined(T.component.inheritAttrs)||(C.inheritAttrs=T.component.inheritAttrs),C.name=T.component.name,C},exports.vccOptionsMap=g;
